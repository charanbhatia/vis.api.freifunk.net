<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>Graph page</title>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
</head>

<body>

    <h1>Graph page</h1>
    <h2>Graph 1</h2>
    <figure id="graph1_container">
        <figcaption>Top 10 communities with the most nodes<figcaption>
    </figure>
    <h2>Graph 2</h2>
    <figure id="graph2_container">
        <figcaption>Nodes over time<figcaption>
    </figure>


    <script src="d3.js"></script>
    <script type="module">
        const query_latest_nodes_per_community = JSON.stringify({ query: "{ latest_nodes_per_community { _id timestamp nodes } }" });
        const query_nodes_timeseries = JSON.stringify({ query: "{ grouped_nodes_timeseries { _id { date { year month day hour } } sumNodes } }" });

        // Create graph 1
        import { createGraph1 } from './graphs/graph1.js';
        let graph1 = await createGraph1(query_latest_nodes_per_community);
        graph1_container.prepend(graph1.node());

        // Create graph 2
        import { createGraph2 } from './graphs/graph2.js';
        let graph2 = await createGraph1(query_nodes_timeseries);
        graph2_container.prepend(graph2.node());

    </script>

</body>

</html>